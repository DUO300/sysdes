{{ template "header" . }}
<h1>List of tasks</h1>
<form action="/list" method="GET">
    <input type="hidden" name="kw_h" value="{{ .Kw }}">
    <input type="hidden" name="status_h" value="{{ .Status }}">
    <input type="text" name="kw" value="{{ .Kw }}">
    <input type="radio" name="status" value="all" {{ if and (ne .Status "complete" ) (ne .Status "incomplete" )
        }}checked{{ end }}><label>全て表示</label>
    <input type="radio" name="status" value="complete" {{ if eq .Status "complete" }}checked{{ end
        }}><label>完了済みのみ表示</label>
    <input type="radio" name="status" value="incomplete" {{ if eq .Status "incomplete" }}checked{{ end
        }}><label>未完了のみ表示</label>
    <input type="submit" name="search" value="検索">
    <p><a href="/task/new">新規登録</a></p>
    {{ if not .Tasks }}
    <p>登録データがありません．</p>
    {{ else }}
    <table border="1">
        <tr>
            <th>ID</th>
            <th>タイトル</th>
            <th>締め切り</th>
            <th>状態</th>
            <th>登録日</th>
        </tr>
        {{ range $task := .Tasks }}
        <tr align="center">
            <td><a href="/task/{{ $task.ID }}">{{ $task.ID }}</a></td>
            <td>{{ $task.Title }}</td>
            <td>{{if eq $task.Deadline.Valid false}} - {{else}} {{ $task.Deadline.Time }} {{end}}</td>
            <td>{{ if $task.IsDone }}済{{ end }}</td>
            <td>{{ $task.CreatedAt }}</td>
        </tr>
        {{ end }}
    </table>
    {{ end }}
    <input type="submit" name="movpage" value="<" {{if eq 1 .Pagenum}} disabled {{end}}>
    <input type="hidden" name="pagenum" value="{{ .Pagenum }}">
    {{ .Pagenum }}
    <input type="submit" name="movpage" value=">" {{if eq true .Is_lastpage}} disabled {{end}}>
</form>
{{ template "footer" }}